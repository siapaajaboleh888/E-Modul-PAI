<div class="row justify-content-center">
  <div class="col-md-6 col-lg-5">
    <h3 class="mb-3 text-center">Daftar Akun E-Modul PAI</h3>
    <% if (error) { %>
      <div class="alert alert-danger"><%= error %></div>
    <% } %>
    <form method="POST" action="/register" autocomplete="off">
      <div class="mb-3">
        <label class="form-label">Nama Lengkap <span class="text-danger">*</span></label>
        <input type="text" class="form-control" name="name" required autocomplete="off" value="<%= (form && form.name) || '' %>" />
      </div>
      <div class="mb-3">
        <label class="form-label">Email <span class="text-danger">*</span></label>
        <input type="email" class="form-control" name="reg_email" required autocomplete="off" value="<%= (form && form.email) || (form && form.reg_email) || '' %>"
 />
      </div>
      <div class="mb-3">
        <label class="form-label">Peran <span class="text-danger">*</span></label>
        <select class="form-select" name="role" required>
          <option value="STUDENT" <%= form && form.role === 'STUDENT' ? 'selected' : '' %>>Mahasiswa</option>
          <option value="LECTURER" <%= form && form.role === 'LECTURER' ? 'selected' : '' %>>Dosen</option>
        </select>
      </div>
      <div class="mb-3">
        <label class="form-label">Institusi <span class="text-danger">*</span></label>
        <input type="text" class="form-control" name="institution" required autocomplete="off" value="<%= (form && form.institution) || '' %>" />
      </div>
      <div class="mb-3">
        <label class="form-label">Semester <span class="text-danger">*</span></label>
        <input type="number" class="form-control" name="semester" min="1" step="1" inputmode="numeric" required autocomplete="off" value="<%= (form && form.semester) || '' %>" />
      </div>
      <div class="mb-3">
        <label class="form-label">Password <span class="text-danger">*</span></label>
        <div class="input-group">
          <input type="password" class="form-control" name="password" id="registerPassword" required autocomplete="off" />
          <button class="btn btn-outline-secondary" type="button" id="toggleRegisterPassword">üëÅ</button>
        </div>
        <div class="form-text small">Minimal 8 karakter dan mengandung huruf, angka, dan simbol.</div>
      </div>
      <div class="mb-3">
        <label class="form-label">Konfirmasi Password <span class="text-danger">*</span></label>
        <div class="input-group">
          <input type="password" class="form-control" name="password_confirm" id="registerPasswordConfirm" required autocomplete="off" />
          <button class="btn btn-outline-secondary" type="button" id="toggleRegisterPasswordConfirm">üëÅ</button>
        </div>
      </div>
      <button type="submit" class="btn btn-success w-100">Daftar</button>
    </form>
    <div class="mt-3 text-center small">
      Sudah punya akun? <a href="/login">Login di sini</a>
    </div>
  </div>
</div>

<script>
  (function () {
    function setupToggle(inputId, btnId) {
      var input = document.getElementById(inputId);
      var btn = document.getElementById(btnId);
      if (input && btn) {
        btn.addEventListener('click', function () {
          var isPassword = input.type === 'password';
          input.type = isPassword ? 'text' : 'password';
        });
      }
    }
    setupToggle('registerPassword', 'toggleRegisterPassword');
    setupToggle('registerPasswordConfirm', 'toggleRegisterPasswordConfirm');
  })();
</script>
